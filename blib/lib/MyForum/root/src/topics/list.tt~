<table class="list" >

     <!-- TABLE HEADER-->
     <thead>
         <tr>
              <th>&nbsp</th><th>[% c.socal('topic') %]</th><th>[% c.socal('lastpost') %]</th><th>[% c.socal('threads') %]</th><th>[% c.socal('posts') %]</th> 
         </tr>
     </thead>

        <!-- TABLE BODY: MAIN CONTENT-->
        <tbody>
    [% WHILE (topic = rs.next) %]
        <tr>
            [% # This is Icon for each topic %]   
            <td class='state'>#ID [% topic.id %]</td> 
            
            [% # Each topic have topic title & topic description %]
            <td class='title'>
                <div>
                    <div>
                        <a  href="[% c.uri_for("/topics/view/")_(topic.id) %]" alt="Show thread">
                            [% topic.title %]
                        </a>
                    </div>
                    <div>
                        [% topic.description %]
                    </div>
                </div>
            </td>

            [% # Last thread title and date %]
            <td class='last_post'> 
                [% last_thread = topic.last_thread %]
                [% IF last_thread %]
                <div>
                    <div>
                        <a  href="[% c.uri_for("/")   %]" alt="Show thread">
                            [% last_thread.title %]
                        </a>
                    </div>
                    <div>
                        By: <a href="[% c.uri_for("/") %]" alt="Show author">
                             [% last_thread.author %]
                            </a>
                    </div>
                    <div>
                        [% last_thread.created_date %]
                    <div>
                </div>
            [% END %]
            </td>
            
            [% # Number of threads in this topic %]
            <td class='num'>[% topic.num_threads %]</td>
            
            [% # Number of posts in this topic %]
            <td class='num'>[%  topic.num_posts %]</td>
        </tr>
    [% END %]
        </tbody> 
<!-- TABLE FOOTER-->
      <tfoot>
        <tr>
	    <td>
		[% IF c.user_exists %]
			[% IF c.check_user_roles( 'admin' ) %]
			<a href="[% c.uri_for('/topics/add') %]">[% c.socal('newtopic') %]</a>
			[% END %]
		[% ELSE %]
		   &nbsp
		[% END %]
	    </td>
	    <td>&nbsp</td><td>&nbsp</td><td colspan='2'>
	    <div class='paper'>
			<a href="[% c.uri_for('/topics', p => paper.first_page) %]">[% c.socal('firstpage') %]</a>
			[% IF paper.previous_page %]
			<a href="[% c.uri_for('/topics', p => paper.previous_page) %]"><<</a>
			[% END %]
			&nbsp
			<strong>[% paper.current_page %]</strong>
			&nbsp
			[% IF paper.next_page %]
			<a href="[% c.uri_for('/topics', p => paper.next_page) %]">>></a>
			[% END %]
			<a href="[% c.uri_for('/topics', p => paper.last_page) %]">[% c.socal('lastpage') %]</a>
		</div>	
	    </td>
	</tr>
    </tfoot>
</table>
